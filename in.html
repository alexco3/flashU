<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Alcatraz Premium Flashers</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{margin:0;font-family:'Inter',sans-serif;background:#f5f7fb;color:#333}
header{background:linear-gradient(90deg,#673ab7,#512da8);color:#fff;padding:1rem;text-align:center;border-radius:0 0 20px 20px}
.auth,.wallet{max-width:900px;margin:1rem auto;padding:1.5rem;background:#fff;border-radius:20px;box-shadow:0 6px 15px rgba(0,0,0,.1)}
input,button{width:100%;padding:.8rem;margin:.4rem 0;border-radius:10px;border:1px solid #ccc;font-size:1rem}
button{border:none;color:#fff;font-weight:600;cursor:pointer;transition:.2s}
nav{display:flex;flex-wrap:wrap;gap:.4rem;margin:.6rem 0}
nav button{flex:1;padding:.6rem;font-size:.9rem;border-radius:10px;display:flex;align-items:center;justify-content:center;gap:.4rem}
nav button.active{box-shadow:0 4px 12px rgba(0,0,0,.2);transform:scale(1.05)}
.balance{background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;padding:1rem;border-radius:16px;margin:1rem 0;box-shadow:0 8px 16px rgba(0,0,0,.2)}
.amt{font-size:1.6rem;font-weight:bold}.crypto{font-size:.9rem;opacity:.9}
.tx{padding:.6rem;margin:.3rem 0;border-radius:8px;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.1)}
.tx.deposit{border-left:5px solid #4caf50}.tx.withdraw{border-left:5px solid #f44336}.tx.credit{border-left:5px solid #3f51b5}
.notif{padding:.6rem;background:#e0f7fa;margin:.3rem 0;border-radius:8px}
.logout{background:linear-gradient(45deg,#ff5722,#d84315)}
.pass-wrapper{position:relative;}
.show-pass-btn{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:0.9rem;color:#333;}
#toast{position:fixed;top:20px;right:20px;z-index:9999}
.toast{background:#333;color:#fff;padding:10px 20px;margin-top:10px;border-radius:8px;opacity:0;transform:translateX(100%);transition:all .4s}
.toast.show{opacity:1;transform:translateX(0)}
.toast.success{background:#4caf50}.toast.error{background:#f44336}
.marquee{overflow:hidden;white-space:nowrap;background:#2e7d32;color:#fff;padding:.4rem;border-radius:8px;margin:.6rem 0}
.marquee span{display:inline-block;padding-left:100%;animation:marq 15s linear infinite}
@keyframes marq{0%{transform:translate(0,0)}100%{transform:translate(-100%,0)}}
.crypto-table{width:100%;border-collapse:collapse;margin-top:1rem}
.crypto-table th,.crypto-table td{border:1px solid #ccc;padding:.6rem;text-align:center}
.crypto-table th{background:#673ab7;color:#fff}
.share-btn{background:linear-gradient(90deg,#4caf50,#2e7d32);color:#fff;width:auto;padding:.6rem 1.2rem;border-radius:8px;cursor:pointer}
</style>
</head>
<body>

<header><h1>🌐 Changing Tech World</h1><p>Alcatraz Premium Flashers</p></header>

<div class="marquee"><span id="priceTicker">BTC: $50,000 • ETH: $3,800 • BNB: $420 • SOL: $150 • USDT: $1.00</span></div>

<!-- Auth -->
<div id="auth" class="auth">
  <h2>Sign In / Sign Up</h2>
  <input id="email" placeholder="Email">
  <div class="pass-wrapper">
    <input type="password" id="password" placeholder="Password">
    <button type="button" class="show-pass-btn" id="togglePass">👁️</button>
  </div>
  <div style="background:#e8f0fe;padding:.8rem;border-radius:10px;margin:.4rem 0;color:#0d47a1;font-weight:600;text-align:center;">
    🎉 Create account & get <b>$100,000 credited</b> instantly!
  </div>
  <button id="signIn">Sign In</button>
  <button style="background:linear-gradient(90deg,#673ab7,#4527a0)" id="signUp">Create Account</button>
</div>

<!-- Wallet -->
<div id="wallet" class="wallet" style="display:none">
  <h2>Hello, <span id="userEmail"></span></h2>
  <div class="balance"><div class="amt" id="balanceAmt">$0</div><div class="crypto" id="cryptoAmt">≈0 BTC • 0 ETH</div></div>
  <div style="text-align:center;margin:1rem 0;">
    <button class="share-btn" onclick="copyReferral()">🔗 Share Referral Link</button>
  </div>

  <nav>
    <button data-tab="dashboard" style="background:#2196f3">📊 Dashboard</button>
    <button data-tab="deposit" style="background:#4caf50">💰 Deposit</button>
    <button data-tab="withdraw" style="background:#f44336">🏦 Withdraw</button>
    <button data-tab="credit" style="background:#3f51b5">📥 Credit</button>
    <button data-tab="tx" style="background:#ff9800">📑 Transactions</button>
    <button data-tab="notif" style="background:#009688">🔔 Notifications</button>
    <button data-tab="profile" style="background:#9e9e9e">🙍 Profile</button>
    <button data-tab="guides" style="background:#8e24aa">📖 Guides</button>
  </nav>
  <div id="tabContent" class="tab"></div>
  <button class="logout" id="logout">Sign Out</button>
</div>

<div id="toast"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

// ✅ Firebase Init
const app = initializeApp({
  apiKey:"AIzaSyDtzDCtvM1R71db5qHcwpjVWOgPJ2PnCL0",
  authDomain:"my-globalwallet.firebaseapp.com",
  projectId:"my-globalwallet"
});
const auth = getAuth(app);

// DOM
const authBox=document.getElementById("auth"),
      wallet=document.getElementById("wallet"),
      userEmail=document.getElementById("userEmail"),
      balanceAmt=document.getElementById("balanceAmt"),
      cryptoAmt=document.getElementById("cryptoAmt"),
      tabContent=document.getElementById("tabContent"),
      emailInput=document.getElementById("email"),
      passwordInput=document.getElementById("password"),
      signUpBtn=document.getElementById("signUp"),
      signInBtn=document.getElementById("signIn"),
      logoutBtn=document.getElementById("logout"),
      togglePass=document.getElementById("togglePass");

let balance=0, txLog=[], notifLog=[], BTC_RATE=50000, ETH_RATE=4000;
let referralLink="";

// Helpers
function toast(msg,type=""){const t=document.createElement("div");t.className=`toast ${type}`;t.textContent=msg;document.getElementById("toast").appendChild(t);setTimeout(()=>t.classList.add("show"),100);setTimeout(()=>t.remove(),4000);}
function updateBalance(){balanceAmt.textContent=`$${balance.toLocaleString()}`;cryptoAmt.textContent=`≈ ${(balance/BTC_RATE).toFixed(6)} BTC • ${(balance/ETH_RATE).toFixed(4)} ETH`;}

// Referral
function setReferralLink(email){
  const code = btoa(email).replace(/=/g,""); 
  referralLink = `${window.location.origin}${window.location.pathname}?ref=${code}`;
}
window.copyReferral=()=>{navigator.clipboard.writeText(referralLink);toast("Referral link copied!","success")}

// 👁️ Toggle Password
togglePass.addEventListener("click",(e)=>{e.preventDefault();passwordInput.type=passwordInput.type==="password"?"text":"password";});

// Signup
signUpBtn.addEventListener("click",()=>{
  const email=emailInput.value.trim(), pass=passwordInput.value.trim();
  if(!email||!pass){toast("Enter email & password","error");return;}
  if(pass.length<6){toast("Password must be at least 6 characters","error");return;}
  createUserWithEmailAndPassword(auth,email,pass).then(()=>{
    balance=100000; updateBalance(); setReferralLink(email);
    txLog.push(`<div class="tx credit">+ $100000 Initial Credit</div>`);
    notifLog.push(`<div class="notif">🎉 Welcome bonus credited</div>`);
    authBox.style.display="none"; wallet.style.display="block"; userEmail.textContent=email;
    activateTab("dashboard"); toast("🎉 $100,000 credited!","success");
  }).catch(e=>toast(e.message,"error"));
});

// Signin
signInBtn.addEventListener("click",()=>{
  const email=emailInput.value.trim(), pass=passwordInput.value.trim();
  if(!email||!pass){toast("Enter email & password","error");return;}
  signInWithEmailAndPassword(auth,email,pass).then(u=>{
    balance=100000; updateBalance(); setReferralLink(email);
    authBox.style.display="none"; wallet.style.display="block"; userEmail.textContent=email;
    activateTab("dashboard"); toast("✅ Signed in successfully","success"); emailInput.value=""; passwordInput.value="";
  }).catch(e=>toast(e.message,"error"));
});

// Logout
logoutBtn.addEventListener("click",()=>signOut(auth));

// State
onAuthStateChanged(auth,u=>{
  if(u){authBox.style.display="none"; wallet.style.display="block"; userEmail.textContent=u.email; balance=100000; updateBalance(); setReferralLink(u.email); activateTab("dashboard");}
  else{authBox.style.display="block"; wallet.style.display="none";}
});

// Tabs
const tabButtons = document.querySelectorAll("nav button");
tabButtons.forEach(btn=>{btn.addEventListener("click",()=>activateTab(btn.dataset.tab));});
function activateTab(tab){
  tabButtons.forEach(b=>b.classList.remove("active"));
  document.querySelector(`nav button[data-tab="${tab}"]`).classList.add("active");
  renderTab(tab);
}

// Render
function renderTab(t){
  if(t==='dashboard'){
    tabContent.innerHTML=`
      <h3>Dashboard</h3>
      <canvas id="signupsChart" height="120"></canvas>
      <canvas id="buyersChart" height="120" style="margin-top:1rem"></canvas>
      <h3>Crypto Prices</h3>
      <table class="crypto-table">
        <tr><th>Symbol</th><th>Price (USD)</th></tr>
        <tr><td>BTC</td><td>$50,000</td></tr>
        <tr><td>USDT</td><td>$1.00</td></tr>
        <tr><td>ETH</td><td>$3,800</td></tr>
        <tr><td>SOL</td><td>$150</td></tr>
        <tr><td>BNB</td><td>$420</td></tr>
      </table>
    `;
    new Chart(document.getElementById("signupsChart").getContext("2d"),{
      type:'bar',data:{labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
      datasets:[{label:'New Signups',data:[5,10,7,12,8,15,20],backgroundColor:'#2196f3'}]}
    });
    new Chart(document.getElementById("buyersChart").getContext("2d"),{
      type:'line',data:{labels:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
      datasets:[{label:'Active Buyers',data:[2,4,3,6,5,8,10],borderColor:'#4caf50',fill:false}]}
    });
  }
  if(t==='deposit'){tabContent.innerHTML=`
    <h3>Deposit Addresses</h3>
    <ul style="list-style:none;padding:0;">
      <li><b>BTC:</b> xxxxx <button onclick="copy('xxx')">Copy</button></li>
      <li><b>ETH:</b> xxx <button onclick="copy('xxx')">Copy</button></li>
      <li><b>BNB:</b> xxx <button onclick="copy('xxx')">Copy</button></li>
      <li><b>USDT (TRC20):</b> xxx <button onclick="copy('xxx')">Copy</button></li>
      <li><b>SOL:</b> xxx <button onclick="copy('xxx')">Copy</button></li>
      <li><b>LTC:</b> xxx <button onclick="copy('xxx')">Copy</button></li>
    </ul>`;}
  if(t==='withdraw'){tabContent.innerHTML=`<h3>Withdraw</h3><input id="amt" placeholder="Amount (USD)"><input id="hash" placeholder="Deposit Hash (Tx Hash)"><button onclick="sendWithdraw()">Submit Withdraw</button><div id="wdLog"></div>`;}
  if(t==='credit'){tabContent.innerHTML=`<h3>Request Credit</h3><input id="creditAmt" placeholder="Amount"><button onclick="reqCredit()">Request</button>`;}
  if(t==='tx'){tabContent.innerHTML=`<h3>Transactions</h3>${txLog.join("")}`;}
  if(t==='notif'){tabContent.innerHTML=`<h3>Notifications</h3>${notifLog.join("")}`;}
  if(t==='profile'){tabContent.innerHTML=`<h3>Profile</h3><p>Email:${auth.currentUser.email}</p><p>Status: Active</p>`;}
  if(t==='guides'){tabContent.innerHTML=`<h3>Guides</h3><p>Use deposit/withdraw/credit tabs as needed.</p>`;}
}

// Copy
window.copy=t=>{navigator.clipboard.writeText(t);toast("Copied: "+t,"success")}

// Withdraw
window.sendWithdraw=()=>{let amt=document.getElementById("amt").value.trim();let hash=document.getElementById("hash").value.trim();if(!amt||!hash){toast("Enter amount & hash","error");return;}txLog.push(`<div class="tx withdraw">Withdraw Request: $${amt} (Hash: ${hash}) sent to Admin</div>`);notifLog.push(`<div class="notif">📤 Withdraw of $${amt} submitted (Hash: ${hash})</div>`);document.getElementById("wdLog").innerHTML="✅ Request sent to admin!";toast("Withdraw request sent","success")}

// Credit
window.reqCredit=()=>{let amt=parseFloat(document.getElementById("creditAmt").value||0); if(amt<=0){toast("Enter valid amount","error");return;} txLog.push(`<div class="tx credit">+ $${amt} Credit Requested</div>`);activateTab('credit');toast("Credit requested","success")}

// Prices
setInterval(()=>{let prices=["BTC: $50,000","ETH: $3,800","BNB: $420","SOL: $150","USDT: $1.00"];document.getElementById("priceTicker").textContent=prices.sort(()=>Math.random()-0.5).join(" • ");},4000);
</script>
</body>
</html>
